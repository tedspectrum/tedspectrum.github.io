---
layout: post
title: "Ticker text"
scripts:
- url: "https://cdn.jsdelivr.net/npm/vue@2.6.0/dist/vue.min.js"
  type: "absolute"
- url: "/assets/src/cmdstepper.js"
  type: "relative"
categories: [features]
inlinestyle: >
  <style>
  .app .hidden {
    visibility: hidden;
  }

  .app .textarea {
    width: 100%;
    height: 4em;
  }
  </style>
inlinescript: >
  <script>
  function CmdTickerWords(twm) {
    /* 
      moves first word from hidden into shown each time do() is called 
      twm is { src: '', shown: '', hidden: '' }
    */
    this.do = function () {
      let wordEnd = twm.hidden.indexOf(' ');
      if (wordEnd !== -1) {
        twm.shown += twm.hidden.substring(0, wordEnd + 1);
        twm.hidden = twm.hidden.substring(wordEnd + 1);
      } else {
        twm.shown += twm.hidden;
        twm.hidden = '';
      }
    }
    this.isDone = function () {
      return (twm.hidden === '');
    }
    this.reset = function () {
      twm.hidden = twm.src;
      twm.shown = '';
    }
    if (twm.hasOwnProperty('ms')) {
      this.ms = twm.ms;
    }
  }
  const app = new Vue({
    el: '#app',
    data: function () {
      return {
        'cmdStates': [
          {
            ms: 20,
            src: '',
            shown: '',
            hidden: ''
          },
          {
            ms: 200,
            src: '',
            shown: '',
            hidden: ''
          }
        ],
        'elsrc': 'ttin',
        'stepper': new CmdStepper(100)
      }
    },
    methods: {
      onPause: function () {
        this.stepper.pause();
      },
      onStart: function () {
        if (!this.stepper.isStepping()) {
          // prepare commands
          let cmds = [],
            stpr = this.stepper;
          // easy way to put text into tt
          this.cmdStates[0].src = this.$refs[this.elsrc].value;
          this.cmdStates[1].src = this.$refs[this.elsrc].value.toUpperCase();
          // create command in command list for each state
          this.cmdStates.forEach(function (v, i, a) {
            cmds.push(new CmdTickerWords(v));
            cmds.push(stpr.delay(2000));
          });
          // start stepping, using the commands
          stpr.start(cmds);
        }
      },
      onStop: function () {
        this.stepper.isStepping() && this.stepper.stop();
      }
    }
  });
  </script>
---
{% raw %}
<div id="app" class="app">
  <h1>Ticker text</h1>
  <textarea ref="ttin"
    class="textarea">Lorem ipsum, dolor sit amet consectetur adipisicing elit Quae repellat, eveniet pariatur maxime expedita, molestiae, dicta veniam quos dolores mollitia magni ut ducimus necessitatibus adipisci soluta assumenda inventore aliquam! Veniam?</textarea>
  <button class="app--button" @click.prevent="onStart()">Start</button>
  <button class="app--button" @click.prevent="onPause()">Pause</button>
  <button class="app--button" @click.prevent="onStop()">Stop</button>
  <p v-for="t in cmdStates">
    <span>{{ t.shown }}</span><span class="hidden">{{ t.hidden }}</span>
  </p>
</div>
{% endraw %}