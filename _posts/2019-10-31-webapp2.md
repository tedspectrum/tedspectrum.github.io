---
layout: post
title:  "Web apps in Jekyll - updated"
categories: [web apps]
---

# Setup for styles at top, scripts at bottom

To setup Jekyll so that posts can have both scripts and styles added in the header, 
amend the __head.html__ file in the **_includes** directory.

Scripts are given the __defer__ attribute to defer their execution until page is done.

Add front matter to the jekyll post to provide data that informs what scripts and styles to add.

Finally wrap vue template in html content in __raw__, __endraw__ liquid tags to allow double brackets
etc. in the content.

## Data in the post front matter

Add data for the styles and scripts in the post front matter

{% highlight yaml %}
{% raw %}
layout: post
title:  "Some title"
styles:
  - url: "/relative_path_to_css/some.css"
    type: "relative"
scripts: 
  - url: "https://mycdn/somecode.js"
    type: "absolute"
  - url: "/relative_path_to_script/some.js"
    type: "relative"
{% endraw %}
{% endhighlight %}

## Scripts and styles in the header

Add the code below in the __head.html__ file before the end head tag

{% highlight liquid %}
{% raw %}
  {% for item in page.styles %}
  {% case item.type %}
  {% when "absolute" %}
  <link rel="stylesheet" href="{{ item.url }}">
  {% when "relative" %}
  <link rel="stylesheet" href="{{ item.url | relative_url }}">
  {% endcase %}
  {% endfor %}
{% endraw %}
{% raw %}
  {% for item in page.scripts %}
  {% case item.type %}
  {% when "absolute" %}
  <script defer src="{{ item.url }}"></script>
  {% when "relative" %}
  <script defer src="{{ item.url | relative_url }}"></script>
  {% endcase %}
  {% endfor %}
{% endraw %}
{% endhighlight %}