---
layout: post
title: "ACE Editor"
categories: [features]
scripts: 
  - url: "https://cdn.jsdelivr.net/npm/vue@2.6.0/dist/vue.js"
    type: "absolute"
  - url: "https://cdn.jsdelivr.net/npm/ace-builds@1.4.7/src-min-noconflict/ace.js"
    type: "absolute"
  - url: "https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"
    type: "absolute"
inlinestyle: >
  <style>
    #editor {
      border: 1px solid lightgray;
      margin: auto;
      height: 400px;
      width: 100%;
      font-size: 20px;
    }
    /* ace theme override */
    .ace-twilight .ace_comment {
      font-style: italic;
      color: #7f7f7f;
    }
  </style>
inlinescript: >
  <script>
  const app = new Vue({
    el: '#app',
    data: function() {
      return {
        'buttonGetMsg': 'Get',
        'buttonPostMsg': 'Post',
        'editor': null, 
        'url': ''
      }
    },
    methods: {
      onGetClick: function() {
        let myself = this;
        this.buttonGetMsg = '...';
        axios.get(myself.url, {'responseType': 'text'})
          .then(function(res) {
            console.log(res);
            myself.editor.setValue(res.data);
            myself.editor.gotoLine(1);
            myself.editor.focus();
            myself.buttonGetMsg = 'Get';
          }
        );
      },
      onPostClick: function() {
        let myself = this;
        myself.buttonPostMsg = '...';
        axios.post(myself.url, {'text' : myself.editor.getValue() })
          .finally(function(res) {
            myself.buttonPostMsg = 'Post';
          });
      }
    },
    mounted: function() {
      const editor = ace.edit("editor");
      editor.setTheme("ace/theme/twilight");
      editor.session.setMode("ace/mode/javascript");
      editor.session.setOption("tabSize", 2);
      editor.session.setOption("useSoftTabs", true);
      this.editor = editor;
    }
  });
  </script>
---
{% raw %}
<div id="app" class="app">
  <input type="text" v-model="url"></input>
  <button type="button" id="btnGet" @click="onGetClick">{{ buttonGetMsg }}</button>
  <button type="button" id="btnPost" @click="onPostClick">{{ buttonPostMsg }}</button>
  <div id="editor">// Hello World</div>
</div>
{% endraw %}