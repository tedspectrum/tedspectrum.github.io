{% raw %}
<div id="app" class="app panel-container unselectable" v-cloak>
  <div class="hidden">
    <image ref="tiles" width="640" height="640" src="/assets/pages/gameone/tiles.png"></image>
  </div>
  <panel 
  :active="showMenuPanel"
  classes="panel-fulllengthleft" 
  overlay="true"
  transition="slideright"
  @close="showMenuPanel = false">
  <div class="panel--menu">
    <h2>Menu</h2>
    <button @click="onFullScreen">Full Screen</button>
    <button @click="onEruda">Dev Console</button>
    <div>w: {{ appwidth }}</div>
    <div>h: {{ appheight }}</div>
  </div>
  </panel>
  <button @click="showMenuPanel = true">Menu</button>
  <div class="app--grid">
    <div class="app--grid-main">
      <div class="canvas-container">
    <canvas ref="background" :width="viewWidth" :height="viewHeight"></canvas>
    <canvas ref="player" :width="viewWidth" :height="viewHeight"></canvas>
    <canvas ref="foreground" :width="viewWidth" :height="viewHeight"></canvas>
      </div>
    </div>
    <div class="app--grid-controller">
      <div class="grid--div-controller">
        <div class="grid--button-top grid--button-controller" 
          @mousedown="onMouseDown('up')"
          @mouseup="onMouseUp('up')"
          @touchstart.prevent="onTouchStart('up')"
          @touchend.prevent="onTouchEnd('up')"
          @touchcancel.prevent="onTouchCancel('up')"
        >
        <svg width="50px" height="50px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <image href="/assets/pages/gameone/controller-button.png" x="0" y="0" height="50px" width="50px"/>
        </svg>
        </div>
        <div class="grid--button-left grid--button-controller" 
          @mousedown="onMouseDown('left')"
          @mouseup="onMouseUp('left')"
          @touchstart.prevent="onTouchStart('left')"
          @touchend.prevent="onTouchEnd('left')"
          @touchcancel.prevent="onTouchCancel('left')"
        >
        <svg width="50px" height="50px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <image href="/assets/pages/gameone/controller-button.png" x="0" y="0" height="50px" width="50px" transform="rotate(-90, 25, 25)"/>
        </svg>
        </div>
        <div class="grid--button-right grid--button-controller" 
          @mousedown="onMouseDown('right')"
          @mouseup="onMouseUp('right')"
          @touchstart.prevent="onTouchStart('right')"
          @touchend.prevent="onTouchEnd('right')"
          @touchcancel.prevent="onTouchCancel(right)"
        >
        <svg width="50px" height="50px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <image href="/assets/pages/gameone/controller-button.png" x="0" y="0" height="50px" width="50px" transform="rotate(90, 25, 25)"/>
        </svg>
        </div>
        <div class="grid--button-bottom grid--button-controller" 
          @mousedown="onMouseDown('down')"
          @mouseup="onMouseUp('down')"
          @touchstart.prevent="onTouchStart('down')"
          @touchend.prevent="onTouchEnd('down')"
          @touchcancel.prevent="onTouchCancel('down')"
        ><svg width="50px" height="50px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <image href="/assets/pages/gameone/controller-button.png" x="0" y="0" height="50px" width="50px" transform="rotate(180, 25, 25)"/>
        </svg>
        </div>
      </div>
    </div>
  </div>
  <panel 
  :active="showStartPanel"
  classes="panel-full" 
  overlay="true"
  transition="zoomin">
    <div class="panel--start-content">
      <div class="panel--start-griditem">
      <button class="app-button" 
      :disabled="controlButton.disabled"
      @click.prevent="run()">{{ controlButton.activeMsg }}
      </button>
      </div>
    </div>
  </panel>
</div>
{% endraw %}